<!DOCTYPE html><html lang="en"><head><title>src/grammar/jison</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../"><meta name="groc-document-path" content="src/grammar/jison.coffee"><meta name="groc-project-path" content="src/grammar/jison.coffee"><meta name="groc-github-url" content="https://github.com/sjorek/goatee-script.js"><link rel="stylesheet" type="text/css" media="all" href="../../assets/style.css"><script type="text/javascript" src="../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/sjorek/goatee-script.js/blob/master/src/grammar/jison.coffee">src/grammar/jison.coffee</a></div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><p>© Copyright 2013-2016 Stephan Jorek <a href="&#109;&#x61;&#x69;&#x6c;&#116;&#111;&#58;&#x73;&#x74;&#101;&#112;&#104;&#97;&#110;&#x2e;&#x6a;&#x6f;&#x72;&#x65;&#107;&#64;&#x67;&#x6d;&#97;&#x69;&#108;&#46;&#99;&#111;&#109;">&#x73;&#x74;&#101;&#112;&#104;&#97;&#110;&#x2e;&#x6a;&#x6f;&#x72;&#x65;&#107;&#64;&#x67;&#x6d;&#97;&#x69;&#108;&#46;&#99;&#111;&#109;</a></p>
<p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
implied. See the License for the specific language governing
permissions and limitations under the License.</p></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h1 id="grammar-">Grammar …</h1>
<hr>
<p>… this time it&#39;s jison.coffee !</p></div></div><div class="code"><div class="wrapper"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">(yy, notator)</span> -&gt;</span>

  grammar = {}

  r = notator.resolve
  o = notator.operation</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Actually this is not needed, but it looks nicer ;-)</p></div></div><div class="code"><div class="wrapper">  $<span class="hljs-number">1</span> = $<span class="hljs-number">2</span> = $<span class="hljs-number">3</span> = $<span class="hljs-number">4</span> = $<span class="hljs-number">5</span> = $<span class="hljs-number">6</span> = $<span class="hljs-number">7</span> = $<span class="hljs-number">8</span> = <span class="hljs-literal">null</span></div></div></div><div class="segment"><div class="comments doc-section doc-section-static"><div class="wrapper"><p><span class='doc-section-header'>Static property yy of type <em>Object</em></span></p>
<hr>
<p>The parsers scope</p></div></div><div class="code"><div class="wrapper">  grammar.yy = yy</div></div></div><div class="segment"><div class="comments doc-section doc-section-static"><div class="wrapper"><p><span class='doc-section-header'>Static method aop</span></p>
<hr>
<p>assignment operation shortcut</p></div></div><div class="code"><div class="wrapper">  grammar.aop = aop = <span class="hljs-function"><span class="hljs-params">(op)</span> -&gt;</span> o <span class="hljs-string">"REFERENCE <span class="hljs-subst">#{op}</span> Expression"</span>, <span class="hljs-function">-&gt;</span>
    yy.goatee.create $<span class="hljs-number">2</span>, [$<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>]</div></div></div><div class="segment"><div class="comments doc-section doc-section-static"><div class="wrapper"><p><span class='doc-section-header'>Static method bop</span></p>
<hr>
<p> binary operation shortcut</p></div></div><div class="code"><div class="wrapper">  grammar.bop = bop = <span class="hljs-function"><span class="hljs-params">(op)</span> -&gt;</span> o <span class="hljs-string">"Expression <span class="hljs-subst">#{op}</span> Expression"</span>, <span class="hljs-function">-&gt;</span>
    yy.goatee.create $<span class="hljs-number">2</span>, [$<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>]</div></div></div><div class="segment"><div class="comments doc-section doc-section-static"><div class="wrapper"><p><span class='doc-section-header'>Static property tokens of type <em>String</em></span></p>
<p>List of grammar tokens, automatically set by <code>Grammar</code>&#39;s constructor</p></div></div><div class="code"><div class="wrapper">  grammar.tokens = <span class="hljs-literal">null</span></div></div></div><div class="segment"><div class="comments doc-section doc-section-static"><div class="wrapper"><p><span class='doc-section-header'>Static property lex of type <em>Object</em></span></p>
<hr>
<p>Use the default jison-lexer</p></div></div><div class="code"><div class="wrapper">  grammar.lex =</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Declare all lexer tokens</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-attribute">rules</span>: [</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>ignore white-spaces</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">/\s+/</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>hexadecimal number</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">/0x[a-fA-F0-9]+\b/</span>        , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'NUMBER'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>decimal number</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">///
        ([1-9][0-9]+|[0-9])
        (\.[0-9]+)?
        ([eE][-+]?[0-9]+)?
        \b
        ///</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'NUMBER'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>constants</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">/null\b/</span>                  , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'NULL'</span>
      r <span class="hljs-regexp">/true\b/</span>                  , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'TRUE'</span>
      r <span class="hljs-regexp">/false\b/</span>                 , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'FALSE'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>control flow statements</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">/if\b/</span>                    , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'IF'</span>
      r <span class="hljs-regexp">/then\b/</span>                  , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'THEN'</span>
      r <span class="hljs-regexp">/else\b/</span>                  , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'ELSE'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>not yet implemented:</p>
<pre><code> r /for\b/                   , -&gt; &#39;FOR&#39;</code></pre></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>the following reserved word are not allowed and
raise exceptions if used in the wrong place</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">/return\b/</span>                , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'RETURN'</span>
      r <span class="hljs-regexp">/new\b/</span>                   , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'NEW'</span>
      r <span class="hljs-regexp">/typeof\b/</span>                , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'TYPEOF'</span>
      r <span class="hljs-regexp">/void\b/</span>                  , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'VOID'</span>
      r <span class="hljs-regexp">/instanceof\b/</span>            , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'INSTANCEOF'</span>
      r <span class="hljs-regexp">/yield\b/</span>                 , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'YIELD'</span>
      r <span class="hljs-regexp">/constructor\b/</span>           , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'CONSTRUCTOR'</span>
      r <span class="hljs-regexp">/(__proto__|prototype)\b/</span> , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'PROTOTYPE'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>identifier has to come AFTER reserved words</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">/this\b/</span>                  , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'THIS'</span>       <span class="hljs-comment"># root context</span>
      r <span class="hljs-regexp">/[@]/</span>                     , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'SELF'</span>       <span class="hljs-comment"># current context</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>access context or variable from …</p>
<p>… current scope:</p>
<pre><code>$$ ~ SELF ~ current context
$_        ~ current context&#39;s local variables
_$        ~ current context&#39;s chain of scopes
__        ~ current context&#39;s expression stack</code></pre>
<p>… parent contexts:</p>
<pre><code>_0        ~ current - 1 level (parent) context
_1        ~ current - 2 levels (grand-parent) context
_2        ~ current - 3 levels context
…
_9        ~ current - 10 levels context</code></pre>
<p>… child contexts:</p>
<pre><code>$9        ~ root + 9 levels context
…
$2        ~ root + 2 levels (grand-child) context
$1        ~ root + 1 level (child) context
$0 ~ THIS ~ root context</code></pre></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">/[$_][$_0-9]/</span>             , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'CONTEXT'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>mind the delibrately reduced set of allowed (start) characters
compare with ES3/ES5/ES6</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">/[$_a-zA-Z]\w*/</span>           , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'REFERENCE'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>identifier above</p></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>double-quoted string</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">///
        "
        (
          \\x[a-fA-F0-9]{2} |
          \\u[a-fA-F0-9]{4} |
          \\[^xu]           |
          [^\\"]
        )*
        "
        ///</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'STRING'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>single-quoted string</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">///
        '
        (
          \\[/'\\bfnrt]     |
          \\u[a-fA-F0-9]{4} |
          [^\\']
        )*
        '
        ///</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'STRING'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>ignore multiline-comments</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">/\/\*(?:.|[\r\n])*?\*\//</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>accessors below</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">/\./</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'.'</span>
      r <span class="hljs-regexp">/\[/</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'['</span>
      r <span class="hljs-regexp">/\]/</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">']'</span>
      r <span class="hljs-regexp">/\(/</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'('</span>
      r <span class="hljs-regexp">/\)/</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">')'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>operators below</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-regexp">/\?/</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'?'</span>
      r <span class="hljs-string">':'</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">':'</span>
      r <span class="hljs-string">';'</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">';'</span>
      r <span class="hljs-string">','</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">','</span>
      r <span class="hljs-string">'{'</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'{'</span>
      r <span class="hljs-string">'}'</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'}'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Mathematical assigment operators</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-string">'-='</span>                      , <span class="hljs-function">-&gt;</span>   <span class="hljs-string">'-='</span>
      r <span class="hljs-regexp">/\+=/</span>                     , <span class="hljs-function">-&gt;</span>   <span class="hljs-string">'+='</span>
      r <span class="hljs-regexp">/\*=/</span>                     , <span class="hljs-function">-&gt;</span>   <span class="hljs-string">'*='</span>
      r <span class="hljs-regexp">/\/=/</span>                     , <span class="hljs-function">-&gt;</span>   <span class="hljs-string">'/='</span>
      r <span class="hljs-string">'%='</span>                      , <span class="hljs-function">-&gt;</span>   <span class="hljs-string">'%='</span>
      r <span class="hljs-string">'--'</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'--'</span>
      r <span class="hljs-regexp">/\+\+/</span>                    , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'++'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Bitwise assigment operators</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-string">'&gt;&gt;&gt;='</span>                    , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'&gt;&gt;&gt;='</span>
      r <span class="hljs-string">'&gt;&gt;='</span>                     , <span class="hljs-function">-&gt;</span>  <span class="hljs-string">'&gt;&gt;='</span>
      r <span class="hljs-string">'&lt;&lt;='</span>                     , <span class="hljs-function">-&gt;</span>  <span class="hljs-string">'&lt;&lt;='</span>
      r <span class="hljs-regexp">/\&amp;=/</span>                     , <span class="hljs-function">-&gt;</span>   <span class="hljs-string">'&amp;='</span>
      r <span class="hljs-regexp">/\|=/</span>                     , <span class="hljs-function">-&gt;</span>   <span class="hljs-string">'|='</span>
      r <span class="hljs-regexp">/\^=/</span>                     , <span class="hljs-function">-&gt;</span>   <span class="hljs-string">'^='</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Boolean operators</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-string">'==='</span>                     , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'==='</span>
      r <span class="hljs-string">'!=='</span>                     , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'!=='</span>
      r <span class="hljs-string">'=='</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'=='</span>
      r <span class="hljs-string">'!='</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'!='</span>
      r <span class="hljs-string">'&lt;='</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'&lt;='</span>
      r <span class="hljs-string">'&gt;='</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'&gt;='</span>
      r <span class="hljs-string">'&lt;'</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'&lt;'</span>
      r <span class="hljs-string">'&gt;'</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'&gt;'</span>
      r <span class="hljs-regexp">/\&amp;\&amp;/</span>                    , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'&amp;&amp;'</span>
      r <span class="hljs-regexp">/\|\|/</span>                    , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'||'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Not (!) must be lower priority than != and !==</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-string">'!'</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'!'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Mathemetical operators</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-string">'-'</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'-'</span>
      r <span class="hljs-regexp">/\+/</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'+'</span>
      r <span class="hljs-regexp">/\*/</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'*'</span>
      r <span class="hljs-regexp">/\//</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'/'</span>
      r <span class="hljs-regexp">/\^/</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'^'</span>
      r <span class="hljs-string">'%'</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'%'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Bitwise operators</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-string">'&gt;&gt;&gt;'</span>                     , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'&gt;&gt;&gt;'</span>
      r <span class="hljs-string">'&gt;&gt;'</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'&gt;&gt;'</span>
      r <span class="hljs-string">'&lt;&lt;'</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'&lt;&lt;'</span>
      r <span class="hljs-regexp">/\&amp;/</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'&amp;'</span>
      r <span class="hljs-regexp">/\|/</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'|'</span>
      r <span class="hljs-string">'~'</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'~'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Assignment operator</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-string">'='</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'='</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>EOF is always last …
TODO Figure out why the EOF token is “$”</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-string">'$'</span>                       , <span class="hljs-function">-&gt;</span> <span class="hljs-string">'EOF'</span>
    ]</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Operator Precedence</p>
<h1 id="-">-----------------</h1>
<p>Declare operator precedence from highest to lowest,
see <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence">Operator Precedence</a>.</p></div></div></div><div class="segment"><div class="comments doc-section doc-section-static"><div class="wrapper"><p><span class='doc-section-header'>Static property operators of type <em>Object</em></span></p>
<hr></div></div><div class="code"><div class="wrapper">  grammar.operators = [
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">'.'</span>, <span class="hljs-string">'['</span>, <span class="hljs-string">']'</span>]                  <span class="hljs-comment">#  1 member</span>
    [<span class="hljs-string">'right'</span>, <span class="hljs-string">'NEW'</span>]                         <span class="hljs-comment">#    new</span>
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">'('</span>, <span class="hljs-string">')'</span>]                       <span class="hljs-comment">#  2 call</span>
    [<span class="hljs-string">'nonassoc'</span>, <span class="hljs-string">'++'</span>, <span class="hljs-string">'--'</span>]                 <span class="hljs-comment">#  3 decrement</span>
    [<span class="hljs-string">'right'</span>, <span class="hljs-string">'!'</span>, <span class="hljs-string">'~'</span>, \ <span class="hljs-comment"># '+', '-', \      #  4 usually contains unary +/-</span>
              <span class="hljs-string">'TYPEOF'</span>, <span class="hljs-string">'VOID'</span>, <span class="hljs-string">'DELETE'</span>]
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">'*'</span>, <span class="hljs-string">'/'</span>, <span class="hljs-string">'%'</span>]                  <span class="hljs-comment">#  5 multiply, divide, modulus</span>
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">'+'</span>, <span class="hljs-string">'-'</span>]                       <span class="hljs-comment">#  6 plus/add, minus/substract</span>
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">'&gt;&gt;&gt;'</span>, <span class="hljs-string">'&gt;&gt;'</span>, <span class="hljs-string">'&lt;&lt;'</span>]              <span class="hljs-comment">#  7 bitwise shift</span>
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">'&lt;='</span>, <span class="hljs-string">'&gt;='</span>, <span class="hljs-string">'&lt;'</span>, <span class="hljs-string">'&gt;'</span>]           <span class="hljs-comment">#  8 relational</span>
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">'IN'</span>, <span class="hljs-string">'INSTANCEOF'</span>]             <span class="hljs-comment">#   … in …, … instanceof …</span>
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">'==='</span>, <span class="hljs-string">'!=='</span>, <span class="hljs-string">'=='</span>, <span class="hljs-string">'!='</span>]       <span class="hljs-comment">#  9 equality</span>
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">'^'</span>]                            <span class="hljs-comment"># 11 bitwise and</span>
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">'&amp;'</span>]                            <span class="hljs-comment"># 10 bitwise xor</span>
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">'|'</span>]                            <span class="hljs-comment"># 12 bitwise or</span>
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">'&amp;&amp;'</span>]                           <span class="hljs-comment"># 13 logical and</span>
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">'||'</span>]                           <span class="hljs-comment"># 14 logical or</span>
    [<span class="hljs-string">'right'</span>, <span class="hljs-string">'?'</span>, <span class="hljs-string">':'</span>]                      <span class="hljs-comment"># 15 inline conditional</span>
    [<span class="hljs-string">'right'</span>, <span class="hljs-string">'YIELD'</span>]                       <span class="hljs-comment"># 16 yield is not (yet?) supported</span>
    [<span class="hljs-string">'right'</span>, <span class="hljs-string">'='</span>,    <span class="hljs-string">'+='</span>, <span class="hljs-string">'-='</span>,  <span class="hljs-string">'*='</span>, \   <span class="hljs-comment"># 17 assignments</span>
              <span class="hljs-string">'/='</span>,   <span class="hljs-string">'%='</span>, <span class="hljs-string">'&lt;&lt;='</span>, <span class="hljs-string">'&gt;&gt;='</span>,
              <span class="hljs-string">'&gt;&gt;&gt;='</span>, <span class="hljs-string">'&amp;='</span>, <span class="hljs-string">'^='</span>,  <span class="hljs-string">'|='</span>]
    [<span class="hljs-string">'left'</span>, <span class="hljs-string">','</span>]                            <span class="hljs-comment"># 18 comma</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Reverse the operators because jison orders precedence
from low to high, and we have it high to low,
see <a href="http://dinosaur.compilertools.net/yacc/index.html">Yacc</a>.</p></div></div><div class="code"><div class="wrapper">  ].reverse()</div></div></div><div class="segment"><div class="comments doc-section doc-section-static"><div class="wrapper"><p><span class='doc-section-header'>Static property startSymbol of type <em>String</em></span></p>
<hr>
<p>The <strong>Script</strong> is the top-level node in the syntax tree.</p></div></div><div class="code"><div class="wrapper">  grammar.startSymbol = <span class="hljs-string">'Script'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h1 id="syntax-description-">Syntax description …</h1>
<hr>
<p>To build a grammar, a syntax is needed …</p></div></div></div><div class="segment"><div class="comments doc-section doc-section-static"><div class="wrapper"><p><span class='doc-section-header'>Static property bnf of type <em>Object</em></span></p>
<hr>
<p>… which is notated here in Backus-Naur-Format.</p></div></div><div class="code"><div class="wrapper">  grammar.bnf =</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Since we parse bottom-up, all parsing must end here.</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-attribute">Script</span>: [</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>TODO use a precompiled “undefined” expression in Script » End</p></div></div><div class="code"><div class="wrapper">      r <span class="hljs-string">'End'</span>                       , <span class="hljs-function">-&gt;</span> yy.goatee.create <span class="hljs-string">'scalar'</span>, [<span class="hljs-literal">undefined</span>]
      r <span class="hljs-string">'Statements End'</span>            , <span class="hljs-function">-&gt;</span> $<span class="hljs-number">1</span>
      r <span class="hljs-string">'Seperator Statements End'</span>  , <span class="hljs-function">-&gt;</span> $<span class="hljs-number">2</span>
    ]

    <span class="hljs-attribute">Statements</span>: [
      o <span class="hljs-string">'Statement'</span>
      o <span class="hljs-string">'Statements Seperator Statement'</span>, <span class="hljs-function">-&gt;</span>
        <span class="hljs-keyword">if</span> $<span class="hljs-number">1.</span>operator.name <span class="hljs-keyword">is</span> <span class="hljs-string">'block'</span>
          $<span class="hljs-number">1.</span>parameters.push $<span class="hljs-number">3</span>
          $<span class="hljs-number">1</span>
        <span class="hljs-keyword">else</span>
          yy.goatee.create <span class="hljs-string">'block'</span>, [$<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>]
    ]

    <span class="hljs-attribute">End</span>: [
      r <span class="hljs-string">'EOF'</span>
      r <span class="hljs-string">'Seperator EOF'</span>
    ]

    <span class="hljs-attribute">Identifier</span>: [
      o <span class="hljs-string">'THIS'</span>
      o <span class="hljs-string">'REFERENCE'</span>
    ]

    <span class="hljs-attribute">Seperator</span>: [
      r <span class="hljs-string">';'</span>
      r <span class="hljs-string">'Seperator ;'</span>
    ]

    <span class="hljs-attribute">Statement</span>: [
      o <span class="hljs-string">'Conditional'</span>
      o <span class="hljs-string">'Expression'</span>
    ]

    <span class="hljs-attribute">Parameters</span>: [
      o <span class="hljs-string">''</span>                          , <span class="hljs-function">-&gt;</span> []
      o <span class="hljs-string">'Expression'</span>                , <span class="hljs-function">-&gt;</span> [$<span class="hljs-number">1</span>]
      o <span class="hljs-string">'Parameters , Expression'</span>   , <span class="hljs-function">-&gt;</span> $<span class="hljs-number">1.</span>concat $<span class="hljs-number">3</span>
    ]

    <span class="hljs-attribute">Key</span>: [
      o <span class="hljs-string">'Scalar'</span>
      o <span class="hljs-string">'Primitive'</span>
      o <span class="hljs-string">'Property'</span>
    ]

    <span class="hljs-attribute">KeyValues</span>: [
      o <span class="hljs-string">'Key : Expression'</span>          , <span class="hljs-function">-&gt;</span> [$<span class="hljs-number">1</span>,$<span class="hljs-number">3</span>]
      o <span class="hljs-string">'KeyValues , KeyValues'</span>     , <span class="hljs-function">-&gt;</span> $<span class="hljs-number">1.</span>concat $<span class="hljs-number">3</span>
    ]

    <span class="hljs-attribute">Object</span>: [
      o <span class="hljs-string">'{ }'</span>                       , <span class="hljs-function">-&gt;</span> yy.goatee.create <span class="hljs-string">'object'</span>, []
      o <span class="hljs-string">'{ KeyValues }'</span>             , <span class="hljs-function">-&gt;</span> yy.goatee.create <span class="hljs-string">'object'</span>, $<span class="hljs-number">2</span>
    ]

    <span class="hljs-attribute">Elements</span>: [
      o <span class="hljs-string">''</span>                          , <span class="hljs-function">-&gt;</span> []
      o <span class="hljs-string">'Expression'</span>                , <span class="hljs-function">-&gt;</span> [$<span class="hljs-number">1</span>]
      o <span class="hljs-string">'Elements , Elements'</span>       , <span class="hljs-function">-&gt;</span>
        $<span class="hljs-number">1.</span>concat <span class="hljs-keyword">if</span> $<span class="hljs-number">3.</span>length <span class="hljs-keyword">is</span> <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> [<span class="hljs-literal">undefined</span>] <span class="hljs-keyword">else</span> $<span class="hljs-number">3</span>
    ]

    <span class="hljs-attribute">Array</span>: [
      o <span class="hljs-string">'[ Elements ]'</span>              , <span class="hljs-function">-&gt;</span> yy.goatee.create <span class="hljs-string">'array'</span>, $<span class="hljs-number">2</span>
    ]

    <span class="hljs-attribute">Block</span>: [</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>TODO use a precompiled undefined expression in Block » { Seperator }</p></div></div><div class="code"><div class="wrapper">      o <span class="hljs-string">'{ Seperator }'</span>             , <span class="hljs-function">-&gt;</span> yy.goatee.create <span class="hljs-string">'scalar'</span>, [<span class="hljs-literal">undefined</span>]
      o <span class="hljs-string">'{ Statements }'</span>            , <span class="hljs-function">-&gt;</span> $<span class="hljs-number">2</span>
      o <span class="hljs-string">'{ Statements Seperator }'</span>  , <span class="hljs-function">-&gt;</span> $<span class="hljs-number">2</span>
    ]

    <span class="hljs-attribute">If</span>: [
      o <span class="hljs-string">'IF Group Block'</span>            , <span class="hljs-function">-&gt;</span>
        yy.goatee.create <span class="hljs-string">'if'</span>,  [$<span class="hljs-number">2</span>,$<span class="hljs-number">3</span>]
      o <span class="hljs-string">'If ELSE IF Group Block'</span>    , <span class="hljs-function">-&gt;</span>
        yy.goatee.addElse $<span class="hljs-number">1</span>, yy.goatee.create(<span class="hljs-string">'if'</span>, [$<span class="hljs-number">4</span>,$<span class="hljs-number">5</span>])
    ]

    <span class="hljs-attribute">Conditional</span>: [
      o <span class="hljs-string">'If'</span>
      o <span class="hljs-string">'If ELSE Block'</span>             , <span class="hljs-function">-&gt;</span> yy.goatee.addElse $<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>
    ]

    <span class="hljs-attribute">IncDec</span>: [
      o <span class="hljs-string">"++"</span>
      o <span class="hljs-string">"--"</span>
    ]

    <span class="hljs-attribute">Assignment</span>: [
      o <span class="hljs-string">"IncDec Identifier"</span>         , <span class="hljs-function">-&gt;</span> yy.goatee.create $<span class="hljs-number">1</span>, [$<span class="hljs-number">2</span>, <span class="hljs-number">0</span>]
      o <span class="hljs-string">"Identifier IncDec"</span>         , <span class="hljs-function">-&gt;</span> yy.goatee.create $<span class="hljs-number">2</span>, [$<span class="hljs-number">1</span>, <span class="hljs-number">1</span>]
      aop <span class="hljs-string">'-='</span>
      aop <span class="hljs-string">'+='</span>
      aop <span class="hljs-string">'*='</span>
      aop <span class="hljs-string">'/='</span>
      aop <span class="hljs-string">'%='</span>
      aop <span class="hljs-string">'^='</span>
      aop <span class="hljs-string">'&gt;&gt;&gt;='</span>
      aop <span class="hljs-string">'&gt;&gt;='</span>
      aop <span class="hljs-string">'&lt;&lt;='</span>
      aop <span class="hljs-string">'&amp;='</span>
      aop <span class="hljs-string">'|='</span>
      aop <span class="hljs-string">'='</span>
    ]

    <span class="hljs-attribute">Scalar</span>: [
      o <span class="hljs-string">'NUMBER'</span>                    , <span class="hljs-function">-&gt;</span> Number($<span class="hljs-number">1</span>)
      o <span class="hljs-string">'+ NUMBER'</span>                  , <span class="hljs-function">-&gt;</span> + Number($<span class="hljs-number">2</span>)
      o <span class="hljs-string">'- NUMBER'</span>                  , <span class="hljs-function">-&gt;</span> - Number($<span class="hljs-number">2</span>)
      o <span class="hljs-string">'STRING'</span>                    , <span class="hljs-function">-&gt;</span> yy.goatee.escape($<span class="hljs-number">1</span>)
    ]

    <span class="hljs-attribute">Primitive</span>: [
      o <span class="hljs-string">'NULL'</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-literal">null</span>
      o <span class="hljs-string">'TRUE'</span>                      , <span class="hljs-function">-&gt;</span> <span class="hljs-literal">true</span>
      o <span class="hljs-string">'FALSE'</span>                     , <span class="hljs-function">-&gt;</span> <span class="hljs-literal">false</span>
    ]

    <span class="hljs-attribute">Operation</span>: [</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Mathemetical operations</p></div></div><div class="code"><div class="wrapper">      bop <span class="hljs-string">'*'</span>
      bop <span class="hljs-string">'/'</span>
      bop <span class="hljs-string">'%'</span>
      bop <span class="hljs-string">'+'</span>
      bop <span class="hljs-string">'-'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Boolean operations</p></div></div><div class="code"><div class="wrapper">      o <span class="hljs-string">'! Expression'</span>              , <span class="hljs-function">-&gt;</span>                <span class="hljs-comment"># logical not</span>
        yy.goatee.create <span class="hljs-string">'!'</span> , [$<span class="hljs-number">2</span>]
      bop <span class="hljs-string">'&lt;='</span>
      bop <span class="hljs-string">'&gt;='</span>
      bop <span class="hljs-string">'&lt;'</span>
      bop <span class="hljs-string">'&gt;'</span>
      bop <span class="hljs-string">'==='</span>
      bop <span class="hljs-string">'!=='</span>
      bop <span class="hljs-string">'=='</span>
      bop <span class="hljs-string">'!='</span>
      bop <span class="hljs-string">'&amp;&amp;'</span>
      bop <span class="hljs-string">'||'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Bitwise operations</p></div></div><div class="code"><div class="wrapper">      o <span class="hljs-string">'~ Expression'</span>              , <span class="hljs-function">-&gt;</span>                <span class="hljs-comment"># bitwise not</span>
         yy.goatee.create <span class="hljs-string">'~'</span> , [$<span class="hljs-number">2</span>]
      bop <span class="hljs-string">'&gt;&gt;&gt;'</span>
      bop <span class="hljs-string">'&gt;&gt;'</span>
      bop <span class="hljs-string">'&lt;&lt;'</span>
      bop <span class="hljs-string">'&amp;'</span>
      bop <span class="hljs-string">'|'</span>
      bop <span class="hljs-string">'^'</span>
    ]

    <span class="hljs-attribute">Literal</span>: [
      o <span class="hljs-string">'Object'</span>                                        <span class="hljs-comment"># object literal</span>
      o <span class="hljs-string">'Array'</span>                                         <span class="hljs-comment"># array literal</span>
      o <span class="hljs-string">'Primitive'</span>                 , <span class="hljs-function">-&gt;</span>                <span class="hljs-comment"># boolean, null</span>
        yy.goatee.create <span class="hljs-string">'scalar'</span>,  [$<span class="hljs-number">1</span>]
      o <span class="hljs-string">'Scalar'</span>                    , <span class="hljs-function">-&gt;</span>                <span class="hljs-comment"># number, string</span>
        yy.goatee.create <span class="hljs-string">'scalar'</span>,  [$<span class="hljs-number">1</span>]
    ]

    <span class="hljs-attribute">Scope</span>: [
      o <span class="hljs-string">'CONTEXT'</span>                   , <span class="hljs-function">-&gt;</span>                <span class="hljs-comment"># context reference</span>
        yy.goatee.create <span class="hljs-string">'context'</span>, [$<span class="hljs-number">1</span>]
      o <span class="hljs-string">'SELF'</span>                      , <span class="hljs-function">-&gt;</span>                <span class="hljs-comment"># this reference ≠ this</span>
        yy.goatee.create <span class="hljs-string">'context'</span>, [$<span class="hljs-number">1</span>]
    ]

    <span class="hljs-attribute">Reference</span>: [
      o <span class="hljs-string">'Identifier'</span>              , <span class="hljs-function">-&gt;</span>
        yy.goatee.create <span class="hljs-string">'reference'</span>, [$<span class="hljs-number">1</span>]
      o <span class="hljs-string">'Scope Property'</span>          , <span class="hljs-function">-&gt;</span>                  <span class="hljs-comment"># shorthand dot operator</span>
        yy.goatee.create <span class="hljs-string">'.'</span>, [$<span class="hljs-number">1</span>, yy.goatee.create(<span class="hljs-string">'property'</span>, [$<span class="hljs-number">2</span>])]
      o <span class="hljs-string">'Scope'</span>
    ]

    <span class="hljs-attribute">Property</span>: [</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>CONSTRUCTOR and PROTOTYPE should be safe …</p></div></div><div class="code"><div class="wrapper">      o <span class="hljs-string">'CONSTRUCTOR'</span>
      o <span class="hljs-string">'PROTOTYPE'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>… if not remove them here and adjust tests accordingly !</p></div></div><div class="code"><div class="wrapper">      o <span class="hljs-string">'THIS'</span>
      o <span class="hljs-string">'IF'</span>
      o <span class="hljs-string">'THEN'</span>
      o <span class="hljs-string">'ELSE'</span>
      o <span class="hljs-string">'YIELD'</span>
      o <span class="hljs-string">'INSTANCEOF'</span>
      o <span class="hljs-string">'VOID'</span>
      o <span class="hljs-string">'TYPEOF'</span>
      o <span class="hljs-string">'NEW'</span>
      o <span class="hljs-string">'RETURN'</span>
      o <span class="hljs-string">'CONTEXT'</span>
      o <span class="hljs-string">'REFERENCE'</span>
      o <span class="hljs-string">'CONTEXT Property'</span>        , <span class="hljs-function">-&gt;</span> $<span class="hljs-number">1</span> + $<span class="hljs-number">2</span>
      o <span class="hljs-string">'CONTEXT Primitive'</span>       , <span class="hljs-function">-&gt;</span> $<span class="hljs-number">1</span> + $<span class="hljs-number">2</span>
    ]

    <span class="hljs-attribute">Chain</span>: [
      o <span class="hljs-string">'Expression . Primitive'</span>  , <span class="hljs-function">-&gt;</span>
        yy.goatee.create <span class="hljs-string">'.'</span>, [$<span class="hljs-number">1</span>, yy.goatee.create(<span class="hljs-string">'property'</span>, [$<span class="hljs-number">3</span>])]
      o <span class="hljs-string">'Expression . Property'</span>   , <span class="hljs-function">-&gt;</span>
        yy.goatee.create <span class="hljs-string">'.'</span>, [$<span class="hljs-number">1</span>, yy.goatee.create(<span class="hljs-string">'property'</span>, [$<span class="hljs-number">3</span>])]
    ]

    <span class="hljs-attribute">List</span>: [
      o <span class="hljs-string">'Statement'</span>
      o <span class="hljs-string">'List , Statement'</span>        , <span class="hljs-function">-&gt;</span>
        <span class="hljs-keyword">if</span> $<span class="hljs-number">1.</span>operator.name <span class="hljs-keyword">is</span> <span class="hljs-string">'list'</span>
          $<span class="hljs-number">1.</span>parameters.push $<span class="hljs-number">3</span>
          $<span class="hljs-number">1</span>
        <span class="hljs-keyword">else</span>
          yy.goatee.create <span class="hljs-string">'list'</span>, [$<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>]
    ]

    <span class="hljs-attribute">Group</span>: [
      o <span class="hljs-string">'( List )'</span>                , <span class="hljs-function">-&gt;</span> yy.goatee.create <span class="hljs-string">'group'</span>, [$<span class="hljs-number">2</span>]
    ]

    <span class="hljs-attribute">Expression</span>: [
      o <span class="hljs-string">'Expression ? Expression : Expression'</span>, <span class="hljs-function">-&gt;</span>      <span class="hljs-comment"># ternary conditional</span>
        yy.goatee.create <span class="hljs-string">'?:'</span>, [$<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>, $<span class="hljs-number">5</span>]
      o <span class="hljs-string">'Expression ( Parameters )'</span>, <span class="hljs-function">-&gt;</span>                 <span class="hljs-comment"># function call</span>
        yy.goatee.create <span class="hljs-string">'()'</span>, [$<span class="hljs-number">1</span>].concat $<span class="hljs-number">3</span>
      o <span class="hljs-string">'Expression [ Expression ]'</span>, <span class="hljs-function">-&gt;</span>                 <span class="hljs-comment"># indexer</span>
        yy.goatee.create <span class="hljs-string">'[]'</span>, [$<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>]
      o <span class="hljs-string">'Assignment'</span>
      o <span class="hljs-string">'Reference'</span>
      o <span class="hljs-string">'Literal'</span>
      o <span class="hljs-string">'Operation'</span>
      o <span class="hljs-string">'Chain'</span>
      o <span class="hljs-string">'Group'</span>
    ]

  grammar</div></div></div></div></body></html>