{"version":3,"sources":["gulpfile.coffee"],"names":[],"mappings":"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","file":"gulpfile.js","sourceRoot":"/source/","sourcesContent":["\n\ngulp = require 'gulp'\n\ncoffee = require 'gulp-coffee'\n#cson = require 'gulp-cson'\ncson = require \"#{__dirname}/lib/misc/gulp/gulp-cson\"\ndel = require 'del'\ngroc = require 'gulp-groc'\nrename = require 'gulp-rename'\nreplace = require 'gulp-replace'\nsequence = require 'run-sequence'\nsourcemaps = require 'gulp-sourcemaps'\ntaskqueue = require \"#{__dirname}/lib/misc/gulp/gulp-taskqueue\"\n# logger = require 'gulp-logger'\nutil = require 'gulp-util'\n\n\n\ndeps = taskqueue.createDependencyLog()\n\nload = (filename) ->\n  # require \"goatee-script/misc/gulp/tasks/#{filename}.json\"\n  require \"#{__dirname}/lib/misc/gulp/tasks/#{filename}.json\"\n\n### ---------\nTask: Transpile coffee-script to javascript\n###\ntask = 'coffee:transpile'\ndeps = taskqueue.build task, deps, load, \\\n  (source, destination, name, config) ->\n    ->\n      util.log name, source, destination\n\n      sm = config.sourcemaps ? false\n\n      pipe = gulp.src.apply(gulp, source)\n      pipe = pipe.pipe logger(config.logger) if logger? and config.logger?\n      if config.replace?\n        for replacement in config.replace\n          pipe = pipe.pipe replace.apply(null, replacement)\n      pipe = pipe.pipe sourcemaps.init.apply(sourcemaps, sm.init) if sm\n      pipe = pipe.pipe coffee(config.defaults).on('error', util.log)\n      pipe = pipe.pipe sourcemaps.write.apply(sourcemaps, sm.write) if sm\n      pipe = pipe.pipe rename(config.rename) if config.rename?\n      pipe.pipe gulp.dest(destination)\n\ngulp.task task, deps.queue\ndeps.transpile.push task\n\n\n### ---------\nTask: Transpile cson to json\n###\ntask = 'cson:transpile'\ndeps = taskqueue.build task, deps, load, \\\n  (source, destination, name, config) ->\n    ->\n      util.log name, source, destination\n\n      pipe = gulp.src.apply(gulp, source)\n      pipe = pipe.pipe logger(config.logger) if logger? and config.logger?\n      if config.replace?\n        for replacement in config.replace\n          pipe = pipe.pipe replace.apply(null, replacement)\n      pipe = pipe.pipe cson(config.defaults).on('error', util.log)\n      pipe = pipe.pipe rename(config.rename) if config.rename?\n      pipe.pipe gulp.dest destination\n\ngulp.task task, deps.queue\ndeps.transpile.push task\n\n\n### ---------\nTask: Transpile\n###\ngulp.task 'transpile', deps.transpile, -> util.log 'Transpiling done'\n\n\n### ---------\nTask: Create documenation with groc\n###\ntask = 'groc:doc'\ndeps = taskqueue.build task, deps, load, \\\n  (source, destination, name, config) ->\n    ->\n      util.log name, source, destination\n      defaults = taskqueue.cloneObject config.defaults\n      defaults.out = destination\n      defaults.silent = true unless logger?\n\n      pipe = gulp.src.apply(gulp, source)\n      pipe = pipe.pipe logger(config.logger) if logger? and config.logger?\n      if config.replace?\n        for replacement in config.replace\n          pipe = pipe.pipe replace.apply(null, replacement)\n      pipe = pipe.pipe groc(defaults)\n\ngulp.task task, deps.queue\ndeps.doc.push task\n\n### ---------\nTask: Documentation\n###\ngulp.task 'doc', deps.doc, -> util.log 'Documentation updated'\n\n\n### ---------\nTask: Clean\n###\ngulp.task 'clean', deps.clean, -> util.log 'Everything clean'\n\n\n### ---------\nTask: Default\n###\ngulp.task 'build', (callback) ->\n  sequence 'clean', 'transpile', 'doc', (error) ->\n    util.log error.message if error?\n    callback error\n  util.log 'Build done'\n\n### ---------\nTask: Publish\n###\ngulp.task 'publish', deps.publish, ->  util.log 'Published'\n\n### ---------\nTask: Watch\n###\ngulp.task 'watch', deps.watch, -> util.log 'Watcher running'\n\n### ---------\nTask: Default\n###\ngulp.task 'default', ['build']\n"]}