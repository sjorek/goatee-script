{"version":3,"sources":["misc/gulp/gulp-cson.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA,uBAAA;IAAA;;EAAA,GAAA,GAAM,OAAA,CAAQ,YAAR;;EACN,MAAA,GAAS,OAAA,CAAQ,eAAR;;EACT,IAAA,GAAO,OAAA,CAAQ,aAAR;;EACP,IAAA,GAAO,OAAA,CAAQ,MAAR;;EAEP,MAAM,CAAC,OAAP,GAAiB,SAAC,OAAD;AAEf,QAAA;IAAA,UAAA,GAAa,SAAC,MAAD;AACJ,cAAO,MAAP;AAAA,aACA,cADA;iBACoB;AADpB,aAEA,YAFA;iBAEkB;AAFlB;iBAGA,GAAA,GAAI;AAHJ;IADI;IAMb,IAAA,GAAO,SAAC,MAAD;AACE,cAAO,MAAP;AAAA,aACA,MADA;iBACY;AADZ,aAEA,MAFA;iBAEY;AAFZ,aAGA,cAHA;iBAGoB;AAHpB,aAIA,YAJA;iBAIkB;AAJlB;IADF;IAOP,KAAA,GAAQ,SAAC,IAAD,EAAO,EAAP;AAEN,UAAA;MAAA,IAAA,GAAO;MACP,IAAmD,eAAnD;AAAA,aAAA,cAAA;;;UAAA,IAAK,CAAA,GAAA,CAAL,GAAY;AAAZ,SAAA;;MAGA,IAAI,CAAC,QAAL,GAAgB,IAAI,CAAC;MACrB,IAAA,CAAA,CAA4B,uBAAA,IAAkB,qBAA9C,CAAA;QAAA,IAAI,CAAC,MAAL,GAAc,OAAd;;MAEA,IAAA,GAAO,IAAI,CAAC,WAAL,CAAiB,IAAI,CAAC,QAAQ,CAAC,QAAd,CAAA,CAAjB,EAA2C,IAA3C;MACP,IAAkB,IAAA,YAAgB,KAAlC;AAAA,eAAO,EAAA,CAAG,IAAH,EAAP;;MAEA,IAAI,CAAC,MAAL,GAAc,IAAA,CAAK,IAAI,CAAC,MAAV;MACd,IAA+D,qBAA/D;QAAA,IAAI,CAAC,QAAL,GAAgB,IAAA,CAAK,IAAI,CAAC,QAAV,EAAoB,UAAA,CAAW,IAAI,CAAC,MAAhB,CAApB,EAAhB;;MAEA,IAAA,GAAO,IAAI,CAAC,YAAL,CAAkB,IAAlB,EAAwB,IAAxB;MACP,IAAkB,IAAA,YAAgB,KAAlC;AAAA,eAAO,EAAA,CAAG,IAAH,EAAP;;MAEA,IAAI,CAAC,QAAL,GAAoB,IAAA,MAAA,CAAO,IAAP;MACpB,IAAI,CAAC,IAAL,GAAY,IAAI,CAAC;aAEjB,EAAA,CAAG,IAAH,EAAS,IAAT;IArBM;AAuBR,WAAO,GAAA,CAAI,KAAJ;EAtCQ;AALjB","file":"misc/gulp/gulp-cson.js","sourceRoot":"/source/","sourcesContent":["map = require 'map-stream'\ncoffee = require 'coffee-script'\nrext = require 'replace-ext'\ncson = require 'cson'\n\nmodule.exports = (options) ->\n\n  format2ext = (format) ->\n    return switch format\n      when 'coffeescript' then '.cs'\n      when 'javascript' then '.js'\n      else \".#{format}\"\n\n  swap = (format) ->\n    return switch format\n      when 'json' then 'cson'\n      when 'cson' then 'json'\n      when 'coffeescript' then 'javascript'\n      when 'javascript' then 'coffeescript'\n\n  gcson = (file, cb) ->\n\n    opts = {}\n    opts[key] = value for own key, value of options if options?\n\n\n    opts.filename = file.path\n    opts.format = 'cson' unless opts.filename? or opts.format?\n\n    data = cson.parseString(file.contents.toString(), opts)\n    return cb data if data instanceof Error\n\n    opts.format = swap(opts.format)\n    opts.filename = rext opts.filename, format2ext(opts.format) if opts.filename?\n\n    data = cson.createString data, opts\n    return cb data if data instanceof Error\n\n    file.contents = new Buffer data\n    file.path = opts.filename\n\n    cb null, file\n\n  return map gcson\n"]}